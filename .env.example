
# ============================================================
# ChatBI Environment Configuration
# ============================================================

# ------------------------------------------------------------
# LLM Configuration (Required)
# ------------------------------------------------------------
# Choose your LLM provider: openai, tongyi, deepseek
LLM_PROVIDER=openai
LLM_API_KEY=sk-xxx
LLM_BASE_URL=https://api.openai.com/v1
LLM_MODEL=gpt-3.5-turbo
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=4000

# Alternative: Tongyi (阿里通义千问)
# LLM_PROVIDER=tongyi
# LLM_API_KEY=sk-xxx
# LLM_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
# LLM_MODEL=qwen-max

# Alternative: DeepSeek
# LLM_PROVIDER=deepseek
# LLM_API_KEY=sk-xxx
# LLM_BASE_URL=https://api.deepseek.com/v1
# LLM_MODEL=deepseek-chat

# ------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------
DB_HOST=localhost
DB_PORT=15432
DB_NAME=chatbi
DB_USER=chatbi
DB_PASSWORD=12345
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# ------------------------------------------------------------
# Cache Configuration
# ------------------------------------------------------------
CACHE_TYPE=memory  # memory or redis
REDIS_URL=redis://localhost:16379/0
CACHE_TTL=3600

# ------------------------------------------------------------
# JWT Authentication (Required for Production)
# ------------------------------------------------------------
JWT_SECRET_KEY=chatbi-dev-secret-please-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ------------------------------------------------------------
# Cube.js Service
# ------------------------------------------------------------
CUBE_SERVICE_API=http://localhost:4000

# ------------------------------------------------------------
# Qdrant Vector Database (For MDL Semantic Layer)
# ------------------------------------------------------------
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_PREFER_GRPC=true
QDRANT_COLLECTION_NAME=chatbi_mdl
QDRANT_VECTOR_SIZE=1536  # OpenAI text-embedding-ada-002 dimension

# ------------------------------------------------------------
# API Configuration
# ------------------------------------------------------------
ALLOW_ORIGINS=http://localhost:3000,http://localhost:8001,http://localhost:8080
REQUIRE_AUTH=false  # Set to true in production
RATE_LIMIT=100
RATE_LIMIT_WINDOW=60

# ------------------------------------------------------------
# Langfuse Observability (Optional - for production monitoring)
# ------------------------------------------------------------
LANGFUSE_ENABLED=false  # Set to true to enable LLM tracing
LANGFUSE_PUBLIC_KEY=pk-xxx  # Get from https://cloud.langfuse.com
LANGFUSE_SECRET_KEY=sk-xxx
LANGFUSE_HOST=https://cloud.langfuse.com  # Or self-hosted URL
LANGFUSE_SAMPLE_RATE=1.0  # 采样率 (0.0-1.0), 1.0 = 全量追踪
LANGFUSE_FLUSH_INTERVAL=10  # 上报间隔（秒）
LANGFUSE_DEBUG=false

# ------------------------------------------------------------
# Application
# ------------------------------------------------------------
ENV=development  # development, production, staging
DEBUG=true
